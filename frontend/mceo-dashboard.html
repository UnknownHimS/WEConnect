<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CEO Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Welcome to the CEO Dashboard</h1>

  <!-- Second Password Form -->
  <div id="password-form">
    <label for="second-password">Enter your second password:</label>
    <input type="password" id="second-password" placeholder="Enter second password" required />
    <button id="submit-password">Submit</button>
    <p id="password-error" style="color: red;"></p>
  </div>

  <script>
    const submitPasswordButton = document.getElementById('submit-password');
    const secondPasswordInput = document.getElementById('second-password');
    const passwordError = document.getElementById('password-error');

    submitPasswordButton.addEventListener('click', async () => {
      const secondPassword = secondPasswordInput.value.trim();
      const role = 'CEO';  // This should be dynamically set based on the userâ€™s role

      if (!secondPassword) return;

      try {
        const res = await fetch('https://weconnectb.onrender.com/verify-second-password', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ role, secondPassword }),
        });

        const data = await res.json();

        if (res.ok) {
          // If the second password is correct, show the dashboard content
          document.getElementById('password-form').style.display = 'none';
          document.body.innerHTML += '<p>Access granted to CEO Dashboard!</p>';
        } else {
          // Show error message if password is incorrect
          passwordError.textContent = data.message;
        }
      } catch (error) {
        console.error('Error verifying password:', error);
        passwordError.textContent = 'An error occurred while verifying the second password.';
      }
    });
  </script>
</body>
</html>
